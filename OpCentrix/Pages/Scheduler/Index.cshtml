@* Index.cshtml: *@
@page
@model IndexModel
@using Microsoft.AspNetCore.Mvc.ViewFeatures
@{
    ViewData["Title"] = "Scheduler";
}

<div class="space-y-6 px-4 font-sans">
    <!-- Header Section -->
    <div class="flex items-center justify-between">
        <div class="text-2xl font-bold text-gray-800">🗓️ OpCentrix Scheduler</div>

        <!-- Zoom Controls -->
        <div class="flex items-center space-x-2">
            <button onclick="adjustZoom(-1)" class="bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded text-sm font-medium">− Zoom Out</button>
            <button onclick="adjustZoom(1)" class="bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded text-sm font-medium">+ Zoom In</button>
        </div>
    </div>

    <!-- Add Job Button (HTMX-triggered) -->
    <div class="flex justify-end mb-4">
        <button hx-get="/Scheduler?handler=ShowAddModal"
                hx-target="#modalContainer"
                hx-swap="innerHTML"
                class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">
            + Add Job
        </button>
    </div>

    <!-- Main Scheduler Content -->
    <div class="space-y-4" id="schedulerBody">
        @foreach (var machine in Model.ViewModel.Machines)
        {
            @await Html.PartialAsync("_MachineRow", machine, new ViewDataDictionary(ViewData) { ["TotalHours"] = ViewData["TotalHours"] })
        }
    </div>
</div>

<!-- Modal Container for HTMX -->
<div id="modalContainer"></div>

<!-- Zoom Control Script -->
@section Scripts {
    <script src="~/js/scheduler.js"></script>
}

